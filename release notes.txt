Bi-directional Tester - Release Notes
Date: 2025-10-08

===========================================
Version 1.6.0 - October 2025
===========================================

Highlights
- Added automatic template issues detection and handling
- Added comprehensive Merge settings validation for integration settings
- Enhanced authentication with early error detection and clear error messages
- Fixed critical bug in triple-nested credit fields (credits.creditHours.min/max)
- Improved retry logic with automatic token regeneration
- Added automatic dismissal of release notes popup after sign-in
- Significantly reduced "silent failures" through better validation and error handling

New Features
- Template issues validation (src/sectionTemplateFill.js, src/courseTemplateFill.js):
  • Automatically detects and handles "Something went wrong" API error notifications
  • Extracts Response Status and Response Data from error modal textarea. Example:
      • Response Status: 422 
      • Response Data: {"error":"\"campus\" must be a string"}
  • Takes screenshots and displays formatted error details in console/Logs.md
  • Checks for errors at 6 strategic points (instructor modal open, instructor search, modal close, before/after saves)
  • Offers user takeover with 5-minute timeout or skips merge polling automatically
  • Prevents cascading failures by catching errors early

- Merge settings checks for integration settings (src/preflightChecks.js):
  • Validates real-time merges are enabled before running tests
  • Verifies "Should Coursedog send updates to the SIS?" setting is enabled
  • Checks appropriate entity types based on product and action
  • Provides actionable error messages when settings are misconfigured
  • Prevents wasted time running tests that will fail due to configuration issues

- Enhanced sign-in error handling (src/auth.js):
  • Early detection of "email not found" errors (fails in ~5 seconds instead of 60+ second timeout)
  • Clear validation of "password incorrect" errors
  • Graceful error messages with actionable next steps
  • Automatic dismissal of Coursedog release notes popup after successful sign-in

Bug Fixes
- Fixed triple-nested credit fields handling (src/courseTemplateFill.js):
  • Corrected QID construction to use full path (e.g., "credits.creditHours.min")
  • Added dynamic parent field tracking instead of hardcoded "credits" prefix
  • Implemented precise CSS selectors using aria-describedby and field-id patterns
  • Routed credits fields through fillNestedCreditFields instead of generic handler
  • Eliminated "e-" character corruption in number inputs
  • Added comprehensive logging for debugging field targeting

- Token regeneration for GET after POST retries (src/mergeReportPoller.js):
  • Fresh authentication token generated before each retry attempt
  • Prevents 401/403 errors due to token expiration during long merge processes

Improvements
- Better error messages throughout the application
- More detailed logging for troubleshooting
- Improved selector reliability for nested form fields
- Enhanced resilience during long-running operations
- Robust textarea content extraction with multiple fallback methods
- Enhanced error context with action-specific messages

Changed Files
- src/preflightChecks.js (new)
- src/sectionTemplateFill.js
- src/courseTemplateFill.js
- src/auth.js
- src/index.js
- src/mergeReportPoller.js

Stats
- 6 files modified, 1 new file, ~450 insertions, ~50 deletions

Notes
- No configuration changes required; existing workflows remain compatible
- Merge settings checks run automatically; no user action needed
- API errors are caught early with detailed error reporting and user intervention options
- Error messages now provide clear guidance for resolving issues
